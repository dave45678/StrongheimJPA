drop table strongheim;

create table strongheim (
id number generated by default on null as identity,
student varchar(30),
assignmentType varchar(10),
assignmentGrade number(6,2),
primary key (id)
);

insert into strongheim(student,assignmentType,assignmentGrade)values('student1','quiz',88);
insert into strongheim(student,assignmentType,assignmentGrade)values('student1','hw',68);
insert into strongheim(student,assignmentType,assignmentGrade)values('student2','hw',79);
insert into strongheim(student,assignmentType,assignmentGrade)values('student2','quiz',90);

select * from strongheim;

create view myView as
select student, avg(assignmentGrade) as Average from strongheim group by student;

select * from myView where student='student2';



select all_sequences from dual;








--https://oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1

SELECT object_name, object_type
FROM   user_objects where object_type='SEQUENCE';

SET LINESIZE 100
COLUMN table_name FORMAT A20
COLUMN column_name FORMAT A15
COLUMN generation_type FORMAT A10
COLUMN identity_options FORMAT A50

SELECT table_name, 
       column_name,
       generation_type,
       identity_options
FROM   all_tab_identity_cols
WHERE  owner = 'ora1'
ORDER BY 1, 2;

/*

JPA eclipse generates an error... sequence does not exist

		Strongheim s = new Strongheim();
		String student = "Jack";
		s.setStudent(student);
		BigDecimal assignmentgrade= new BigDecimal(98);
		s.setAssignmentgrade(assignmentgrade);
		String assignmenttype = "quiz";
		s.setAssignmenttype(assignmenttype);
		DbStrongheim.insert(s);

[EL Info]: server: 2016-07-13 11:20:48.111--ServerSession(799426744)--Detected server platform: org.eclipse.persistence.platform.server.NoServerPlatform.
[EL Info]: server: 2016-07-13 11:20:49.221--ServerSession(799426744)--Detected server platform: org.eclipse.persistence.platform.server.NoServerPlatform.
[EL Info]: 2016-07-13 11:20:49.44--ServerSession(799426744)--EclipseLink, version: Eclipse Persistence Services - 2.6.0.v20150309-bf26070
[EL Info]: connection: 2016-07-13 11:20:50.716--ServerSession(799426744)--/file:/home/oracle/workspace/Strongheim_test/build/classes/_Strongheim_test login successful
[EL Warning]: 2016-07-13 11:20:51.101--ClientSession(1930603846)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.6.0.v20150309-bf26070): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: ORA-02289: sequence does not exist

Error Code: 2289
Call: SELECT SEQ_GEN_IDENTITY.NEXTVAL FROM DUAL
Query: ValueReadQuery(sql="SELECT SEQ_GEN_IDENTITY.NEXTVAL FROM DUAL")

*/